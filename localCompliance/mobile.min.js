const mainContent=document.getElementById("main"),productCard=document.createElement("div"),twitch=window.Twitch.ext;var theme;const handleGenerateProductList=a=>{a.products.forEach((t,e)=>{var o=document.createElement("a");o.href=`https://${a.domain}/kol/${a.path}?product_id=`+t.product_id,o.target="_blank",o.style.display="block",o.style.textDecoration="none",o.innerHTML=`
      <div class="productCard" style="display:flex; width:95%; justify-content: space-between; padding: 8px">
        <div class="productItem" style="display: flex">
          <div class="container" id="container_${e}">
            <div class="left" id="left_${e}"></div>
            <div class="right" id="right_${e}"></div>
          </div>
          <div style="display: flex; flex-direction: column; justify-content: space-around; margin-left: 16px; width: 150px"">
            <p class="title" style="margin: 0; color: ${"white"===theme?"#000":"#fff"}">${t.title}</p>
            <p class="price" style="margin: 0; color: ${"white"===theme?"#000":"#fff"}">$ ${t.price}</p>
          </div>
        </div>
        <div style="display: flex; align-items: center;">
          <img class="arrow" src="${"white"===theme?"right-black.svg":"right.svg"}"/>
        </div>
      </div> `+(e!==a.products.length&&'<hr style="margin: 0 8px; border-top: 0.5px solid #D9D9D9;border-bottom: 0.5px solid #D9D9D9; border-left:0.5px solid #D9D9D9; border-right:0.5px solid #D9D9D9" />'),mainContent.appendChild(o)})},handleImgLoop=(twitch.configuration.onChanged(function(){if(twitch.configuration.broadcaster)try{var t=twitch.configuration.broadcaster.content;theme=JSON.parse(t).theme,$.ajax({type:"GET",url:"https://showmore-api.showmore.cc/api/v1/website/store/page/twitch",data:{store_id:JSON.parse(t).storeId},contentType:"application/json"}).then(t=>{var e=document.getElementById("body"),o=document.getElementById("storeLink"),a=document.getElementById("storeTitle");document.getElementById("nav").style.backgroundColor="white"===theme?"#F5F5F5":"#2C2A30",e.style.backgroundColor="white"===theme?"#F5F5F5":"#2C2A30",a.style.color="white"===theme?"#000":"#fff",a.innerHTML=t.data.title,o.href=`https://${t.data.domain}/kol/`+t.data.path,o.target="_blank",document.getElementById("logo").src=t.data.logo,handleGenerateProductList(t?.data),t?.data?.products?.forEach((t,e)=>{handleImgLoop(t,e)})}).catch(t=>{console.log(t)})}catch(t){console.log(t)}}),(e,t)=>{let o=0;const a=document.getElementById("left_"+t),n=document.getElementById("right_"+t),l=document.getElementById("container_"+t);a.style.backgroundImage=`url("${e?.photo_urls[o]}")`,n.style.backgroundImage=`url("${e?.photo_urls[o+1]}")`,1!==e?.photo_urls.length&&(setInterval(()=>{a.classList.add("left-move-left"),n.classList.add("right-move-left"),l.classList.add("container-movement")},4e3),a.addEventListener("animationend",t=>{t.target.classList.remove("left-move-left"),n.classList.remove("right-move-left"),t.target.style.backgroundImage='url("'+e?.photo_urls[++o]+'")',o+1>=e?.photo_urls.length&&(o=-1),n.style.backgroundImage='url("'+e?.photo_urls[o+1]+'")',l.classList.remove("container-movement")}))});