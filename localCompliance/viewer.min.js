var token,userId,theme;const mainContent=document.getElementById("main"),twitch=window.Twitch.ext;twitch.onAuthorized(t=>{token=t.token,userId=t.userId}),twitch.onContext(t=>{}),twitch.configuration.onChanged(function(){if(twitch.configuration.broadcaster)try{var t=JSON.parse(twitch.configuration.broadcaster.content);theme=t.theme,$.ajax({type:"GET",url:"https://showmore-api.showmore.cc/api/v1/website/store/page/twitch",data:{store_id:t.storeId},contentType:"application/json"}).then(t=>{var e=document.getElementById("storeLink");document.getElementById("storeName").innerHTML=t.data.title,e.href=`https://${t.data.domain}/kol/`+t.data.path,e.target="_blank",document.getElementById("logo").src=t.data.logo,handleGenerateProductList(t?.data),t?.data?.products.forEach((t,e)=>{handleImgLoop(t,e)}),handleChangeStyle(theme)}).catch(t=>{console.log(t)})}catch(t){console.log(t)}});var open=!0;const box=document.getElementById("left-box"),nav=document.getElementById("uc-nav"),collapseIcon=document.getElementById("collapse-icon"),handleGenerateProductList=($("#right-box").click(function(){(open=!open)?(box.style.width="100px",nav.style.display="flex",collapseIcon.src="black"===theme?"left.svg":"left-black.svg"):(box.style.width="0px",nav.style.display="none",collapseIcon.src="black"===theme?"right.svg":"right-black.svg")}),a=>{a.products.forEach((t,e)=>{var o=document.createElement("a");o.href=`https://${a.domain}/kol/${a.path}?product_id=`+t.product_id,o.target="_blank",o.style.display="block",o.style.marginBottom="8px",o.style.textDecoration="none",o.innerHTML=`
    <div class="card-wrapper">
        <div class="img-wrapper" id="container_${e}">
          <div class="left" id="left_${e}"></div>
          <div class="right" id="right_${e}"></div>
        </div>
        <div>
          <p class="title">${t.title}</p>
          <p class="price">$${t.price}</p>
        </div>
        </div>`,mainContent.appendChild(o)})}),handleImgLoop=(e,t)=>{let o=0;const a=document.getElementById("left_"+t),l=document.getElementById("right_"+t),n=document.getElementById("container_"+t);a.style.backgroundImage=`url("${e?.photo_urls[o]}")`,l.style.backgroundImage=`url("${e?.photo_urls[o+1]}")`,1!==e?.photo_urls.length&&(setInterval(()=>{a.classList.add("left-move-left"),l.classList.add("right-move-left"),n.classList.add("container-movement")},4e3),a.addEventListener("animationend",t=>{t.target.classList.remove("left-move-left"),l.classList.remove("right-move-left"),t.target.style.backgroundImage='url("'+e?.photo_urls[++o]+'")',o+1>=e?.photo_urls.length&&(o=-1),l.style.backgroundImage='url("'+e?.photo_urls[o+1]+'")',n.classList.remove("container-movement")}))},handleChangeStyle=t=>{var e=document.getElementById("left-box"),o=document.getElementById("right-box"),a=document.getElementsByClassName("title"),l=document.getElementById("storeName"),n=document.getElementById("collapse-icon");"black"===t?(e.style.background="rgba(0, 0, 0, 0.6)",o.classList.remove("right-box-white","right-box-black"),o.classList.add("right-box-black"),n.src="left.svg",l.style.color="white",Array.from(a).forEach(t=>{t.style.color="white"})):(e.style.background="rgba(255, 255, 255, 0.7)",o.classList.remove("right-box-white","right-box-black"),o.classList.add("right-box-white"),l.style.color="black",n.src="left-black.svg",Array.from(a).forEach(t=>{t.style.color="black"}))};